
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>InstantWind Project</title><meta name="generator" content="MATLAB 8.1"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2013-04-22"><meta name="DC.source" content="modelReductionIntro.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, tt, code { font-size:12px; }
pre { margin:0px 0px 20px; }
pre.error { color:red; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>InstantWind Project</h1><!--introduction--><p>A step by step introduction to using InstantWind.</p><p>InstantWind was a project financed by Vindforsk, lead by Meventus. The project group consisted of Meventus, CMR, H&oslash;gskolan p&aring; Gotland and OpenCFD For more information &amp; contact info, see InstantWind homepages www.instantwind.com Meventus AS www.meventus.com CMR www.cmr.com H&oslash;gskolan p&aring; Gotland www.hgo.se OpenCFD www.opencfd.com</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Project setup</a></li><li><a href="#3">Running InstantWind</a></li></ul></div><h2>Project setup<a name="1"></a></h2><p>I) Project setup - file system/directory structure for running the project.</p><p>1) Create the following directories :</p><pre class="codeinput">    <span class="syscmd">!mkdir InstantWind</span>
    <span class="syscmd">!mkdir InstantWind/VBShearFlow</span>
    <span class="syscmd">!mkdir InstantWind/VBShearFlow/bin</span>
    <span class="syscmd">!mkdir InstantWind/ModelReductionDemo</span>
    <span class="syscmd">!mkdir InstantWind/ModelReductinoDemo/figures</span>
</pre><div><ul><li>InstantWind is the main directory</li><li>InstantWind/VBShearFlow directory must contain the CFD results, one CFD simulation or "snapshot" of the format dat_files_1, dat_files_2, ..., dat_files_7, .. etc.   Download the CFD results at <a href="http://85.19.218.244/instantwind/openfoams.html">www.instantwind.com <img src="modelReductionIntro_eq01535.png" alt="$\rightarrow$"> CFD model <img src="modelReductionIntro_eq01535.png" alt="$\rightarrow$"> OpenFoams <img src="modelReductionIntro_eq01535.png" alt="$\rightarrow$"> Download all files</a> into the VBShearFlow folder.   The .zip file include the subfolders</li></ul></div><pre>     Horizontal
     Horizontal/bin
     Vertical
     Vertical/bin
     AdditionalCases
     AdditionalCases/bin</pre><div><ul><li>InstantWind/VBSshearFlow/bin shall be used to store files created during execution of the program, i.e. .mat files such basisCollection.mat, snapshotsCollection.mat, etc. These files are described later.</li><li>InstantWind/ModelReductionDemo contains the matlab and c-files.  From <a href="http://85.19.218.244/instantwind/matlab.html">www.instantwind.com <img src="modelReductionIntro_eq01535.png" alt="$\rightarrow$"> code <img src="modelReductionIntro_eq01535.png" alt="$\rightarrow$"> matlab</a>   download &amp; unzip InstantWindMatlab.zip into this folder   The folder structure should be   (Klaus: type in final folder structure here)</li><li>InstantWind/ModelReductionDemo/figures will also contain output figures from the model runs</li></ul></div><h2>Running InstantWind<a name="3"></a></h2><p>We now describe how to run the project. It is suggested that the user goes through the theory section of the report <a href="http://85.19.218.244/instantwind/documents.html">InstantWind Report</a> to get an understanding of the tasks involved. Some of the keywords like 'snapshots', 'basis' are described in the report. For a summary of the algorithm please refer to chapter 2 in the above report.</p><p>1) Start matlab and change current directory to InstantWind/ModelReductionDemo.</p><pre class="codeinput">    cd <span class="string">\instantwind0/ModelReductionDemo</span>
</pre><p>2) We need to create mex files for using c functions (for RANS operators) in matlab.  At the command prompt type the following:</p><pre class="codeinput">    mex <span class="string">A_mex_check2.c</span>
    mex <span class="string">V_mex_check2.c</span>
    mex <span class="string">P_mex_check3.c</span>
    mex <span class="string">K_mex_check3.c</span>
</pre><p>In case your matlab is not associated with a compiler, you will be requested by matlab to do that.  We have tested that the mex files work on windows 32-bit versions of Matlab. NOTE: The Windows 64-bit version of Matlab requires some additonal options, but crashes when mexing.  This has been reported to Matlab, and will be solved later.</p><p>3) At the matlab command prompt type 'modelReductionDemo' and press the 'return' key.  This is the main function for the project</p><pre class="codeinput">    modelReductionDemo
</pre><p>3) Clearly, the main script/function for the project is <i>modelReductionDemo.m</i> and the description of variables is described in it</p><p>4) When the user is asked for an input to the keyboard, please type in (and not copy paste)    makeSnapshotsCollectionOpenFoamXY(snapshotCollectionFileName, CFD_resultsPathH, CFD_ResultsPathV, CFD_JObsStruct, flagsB);</p><p>5) The code goes through the following main functions: * <b>makeSnapshotsCollectionOpenFoamXY</b> - Collects the CFD results   (snapshots)</p><div><ul><li><b>readFrontTileOpenFoam</b> - Collects information of the frontTile, to be   used as a constraint (rhs of equations Ax=b)</li></ul></div><div><ul><li><b>makeBasisCollectionOpenFoam</b> &#8211; Performs SVD on the snapshots (from the snapshotlist.)</li></ul></div><div><ul><li><b>RANSEquationsOperators2</b> &#8211; Computers the operators (Advection, Viscous,   Pressure, Turbulent Kinetic Energy) for the RANS equations.</li></ul></div><div><ul><li><b>modelReductionSolverOpenFoamXY</b> &#8211; computes the reduced solutions based on the information from the above functions.</li></ul></div><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2013a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% InstantWind Project
% A step by step introduction to using InstantWind.
% 
% InstantWind was a project financed by Vindforsk, lead by Meventus.  
% The project group consisted of Meventus, CMR, Høgskolan på Gotland and
% OpenCFD
% For more information & contact info, see 
% InstantWind homepages www.instantwind.com 
% Meventus AS www.meventus.com 
% CMR www.cmr.com
% Høgskolan på Gotland www.hgo.se
% OpenCFD www.opencfd.com

%% Project setup 
% I) Project setup - file system/directory structure for running the project. 
% 
% 1) Create the following directories : 

    !mkdir InstantWind
    !mkdir InstantWind/VBShearFlow
    !mkdir InstantWind/VBShearFlow/bin
    !mkdir InstantWind/ModelReductionDemo
    !mkdir InstantWind/ModelReductinoDemo/figures
    
%% 
% * InstantWind is the main directory 
% * InstantWind/VBShearFlow directory must contain the CFD results, one CFD simulation or "snapshot" of the format dat_files_1, dat_files_2, ..., dat_files_7, .. etc.   
%   Download the CFD results at <http://85.19.218.244/instantwind/openfoams.html www.instantwind.com $\rightarrow$ CFD model $\rightarrow$ OpenFoams $\rightarrow$ Download all files> into the VBShearFlow folder. 
%   The .zip file include the subfolders 
%
%       Horizontal 
%       Horizontal/bin
%       Vertical
%       Vertical/bin
%       AdditionalCases
%       AdditionalCases/bin
%   
% * InstantWind/VBSshearFlow/bin shall be used to store files created during execution of the program, i.e. .mat files such basisCollection.mat, snapshotsCollection.mat, etc. These files are described later. 
% * InstantWind/ModelReductionDemo contains the matlab and c-files.  From <http://85.19.218.244/instantwind/matlab.html www.instantwind.com $\rightarrow$ code $\rightarrow$ matlab>
%   download & unzip InstantWindMatlab.zip into this folder
%   The folder structure should be 
%   (Klaus: type in final folder structure here) 
% * InstantWind/ModelReductionDemo/figures will also contain output figures from the model runs

%% Running InstantWind
% We now describe how to run the project. 
% It is suggested that the user goes through the theory section of the report <http://85.19.218.244/instantwind/documents.html InstantWind Report> to get an understanding of the tasks involved. Some of the keywords like 'snapshots', 'basis' are described in the report.
% For a summary of the algorithm please refer to chapter 2 in the above report. 

%%  
% 1) Start matlab and change current directory to InstantWind/ModelReductionDemo.
    cd \instantwind0/ModelReductionDemo
%%    
% 2) We need to create mex files for using c functions (for RANS operators) in matlab.  At the command prompt type the following: 
    mex A_mex_check2.c
    mex V_mex_check2.c
    mex P_mex_check3.c
    mex K_mex_check3.c
%%    
% In case your matlab is not associated with a compiler, you will be
% requested by matlab to do that.  We have tested that the mex files work
% on windows 32-bit versions of Matlab.  
% NOTE: The Windows 64-bit version of Matlab requires some additonal options, but crashes when mexing.  This
% has been reported to Matlab, and will be solved later. 
%% 
% 3) At the matlab command prompt type 'modelReductionDemo' and press
% the 'return' key.  This is the main function for the project
    modelReductionDemo

%% 
% 3) Clearly, the main script/function for the project is 
% _modelReductionDemo.m_ and the description of variables is described in
% it

%%
% 4) When the user is asked for an input to the keyboard, please type in
% (and not copy paste) 
%    makeSnapshotsCollectionOpenFoamXY(snapshotCollectionFileName, CFD_resultsPathH, CFD_ResultsPathV, CFD_JObsStruct, flagsB);
    
%%
% 5) The code goes through the following main functions: 
% * *makeSnapshotsCollectionOpenFoamXY* - Collects the CFD results
%   (snapshots)
%
% * *readFrontTileOpenFoam* - Collects information of the frontTile, to be
%   used as a constraint (rhs of equations Ax=b)
%
% * *makeBasisCollectionOpenFoam* – Performs SVD on the snapshots (from the
% snapshotlist.)
%
% * *RANSEquationsOperators2* – Computers the operators (Advection, Viscous,
%   Pressure, Turbulent Kinetic Energy) for the RANS equations.
%
% * *modelReductionSolverOpenFoamXY* – computes the reduced solutions based on the
% information from the above functions.       
##### SOURCE END #####
--></body></html>